<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>


	
	<script>
		// context

		// for(var i = 0; i < 5; i++){
		// 	setTimeout(()=>{
		// 		console.log(i);
		// 	}, 500);
		// }

		// console.log(i);
		

		let user = {
			firstname: 'John',
			sayHi(){
				console.log(`Hi! My name is ${this.firstname}`);
			}
		}

		user.sayHi();
		// setTimeout(user.sayHi, 1000);// lost context
		// setTimeout(()=>user.sayHi(), 1000); // 'fixed' content with closure

		// call(context, arg1, arg2, ... , argN)   apply(context, [arg1, arg2, ... , argN]) - переадрессация вызовов

		console.log(Math.min(1,2,3,4,5,-6));
		console.log(Math.min.apply(null, [1,2,3,4,5,-8]));

		let arr = [1,2,3,4,5,-12];
		console.log(Math.min(...arr)); // ...[1,2,3,4,5] -> 1,2,3,4,5


		function sum(){
			// let arr = Array.prototype.slice.call(arguments);
			// let arr = [].slice.call(arguments); // заимствование метода
			return [].reduce.call(arguments, (total, num) => total + num);
		}

		console.log(sum(1,2,3,4,5));


		function greet(){
			console.log(`Hello from ${this.name}`);
		}

		let adm = {
			name: 'admin'
		}

		let student = {
			name: 'Jane'
		}

		greet.call(adm);
		greet.call(student);

		// decorators

		function s1(){
			let sum = 0;
			for(let num of arguments){
				sum += num;
			}
			return sum;
		}

		let extrasum = function(){
			return s1.apply(this, arguments);
		}


		// bind for fixed content

		const hiFromStudent = greet.bind(student);
		const hiFromAdmin = greet.bind(adm);

		hiFromAdmin();
		hiFromAdmin();
		hiFromStudent();

		// bind in case of context loose
		const userHi = user.sayHi.bind(user);
		setTimeout(userHi, 1000);


		// destucturing

		// let [name, lastname] = ['John', 'Peterson'];
		// let [name, , age] = ['John', 'Peterson', 18];
		let [name, ...details] = ['John', 'Peterson', 18, 'student', 'New York'];

		let human = {
			firstname: 'Peter',
			lastname: 'Johnson',
			age: 22,
			city: 'Kyiv',
			hobbys: ['Art', 'JS', 'Football']
		};

		let {firstname, lastname, ...humanInfo} = human;
		// let {city: c} = human;


		let array = [1,2,3,4,5];

		let array2 = [-1,0, ...array, 6,7,8,9];




	</script>
	<script type="module" src="common.js"></script>
</body>
</html>